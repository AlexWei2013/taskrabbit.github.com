<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>TaskRabbit - Posting a Simple Task</title>
    <link href="/stylesheets/application.css" media="screen" rel="stylesheet" type="text/css" />
    <link href="/stylesheets/grid.css" media="screen" rel="stylesheet" type="text/css" />
    <link href="/stylesheets/documentation.css" media="screen" rel="stylesheet" type="text/css" />
  </head>
  
  <body>
    <div id="header">
    </div>
    <div id="main">
      <div id="sidebar" class="span-6">
        <ul>
        
          <li><a href="/post_simple.html">Posting a Simple Task</a></li>
        
          <li><a href="/auth.html">Oauth</a></li>
        
          <li><a href="/post_task_parameters.html">Parameters for posting a task</a></li>
        
          <li><a href="/post_with_location.html">Posting a Task with locations</a></li>
        
          <li><a href="/post_with_photo.html">Posting a Task with a photo</a></li>
        
          <li><a href="/post_with_sound.html">Posting a Task with a sound</a></li>
        
          <li><a href="/account.html">User account informations</a></li>
        
        </ul>
      </div>
      <div id="content" class="span-18 last">

        <h1>Posting a Simple Task</h1>

<p>TaskRabbit allows posting of Tasks by a client application on behalf of a user that has authorized that application. Authorization is done through OAuth and assigns a unique token to the user for for the application to use. This key is passed in all requests.</p>

<h2>Setup</h2>

<ul>
<li>There is a user who is authenticated to your client application</li>
<li>The user has an authorization token of &quot;rRou72pewt102y926jfhwow438238poQR31d&quot;</li>
</ul>

<h2>Creating a new Task</h2>

<p>To create a task, the client application POSTs data, the content can be either a json or x-www-form-urlencoded.</p>

<h3>Required Values</h3>

<ul>
<li>name: The short, public text shown to describe the Task</li>
<li>named_price: The integer amount, in whole US Dollars, the TaskPoster is willing to pay for the Task</li>
<li>city_id: The metro area where the Task will occur

<ul>
<li>1 -&gt; Boston</li>
<li>3 -&gt; SF Bay Area</li>
<li>4 -&gt; New York City</li>
<li>6 -&gt; Los Angeles</li>
<li>40 -&gt; Orange County</li>
</ul></li>
</ul>

<h3>POST &#47;api&#47;v1&#47;tasks</h3>

<ul>
<li>Authorization: OAuth rRou72pewt102y926jfhwow438238poQR31d</li>
<li>Content-Type: application&#47;json</li>
</ul>
<div class="CodeRay">
  <div class="code"><pre>{
  <span style="color:#606"><span style="color:#404">&quot;</span><span>task</span><span style="color:#404">&quot;</span></span>: {
    <span style="color:#606"><span style="color:#404">&quot;</span><span>name</span><span style="color:#404">&quot;</span></span>:<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">My First Task</span><span style="color:#710">&quot;</span></span>, 
    <span style="color:#606"><span style="color:#404">&quot;</span><span>named_price</span><span style="color:#404">&quot;</span></span>: <span style="color:#00D">20</span>, 
    <span style="color:#606"><span style="color:#404">&quot;</span><span>city_id</span><span style="color:#404">&quot;</span></span>: <span style="color:#00D">4</span>
  }
}
</pre></div>
</div>

<h3>Simplified Response</h3>

<ul>
<li>Status Code: 200</li>
<li>Content-Type: application&#47;json</li>
</ul>
<div class="CodeRay">
  <div class="code"><pre>{
  <span style="color:#606"><span style="color:#404">&quot;</span><span>id</span><span style="color:#404">&quot;</span></span>:<span style="color:#00D">9221</span>,
  <span style="color:#606"><span style="color:#404">&quot;</span><span>name</span><span style="color:#404">&quot;</span></span>:<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">My First Task</span><span style="color:#710">&quot;</span></span>,
  <span style="color:#606"><span style="color:#404">&quot;</span><span>named_price</span><span style="color:#404">&quot;</span></span>: <span style="color:#00D">20</span>,
  <span style="color:#606"><span style="color:#404">&quot;</span><span>state</span><span style="color:#404">&quot;</span></span>:<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">opened</span><span style="color:#710">&quot;</span></span>,
  <span style="color:#606"><span style="color:#404">&quot;</span><span>city</span><span style="color:#404">&quot;</span></span>:{
    <span style="color:#606"><span style="color:#404">&quot;</span><span>id</span><span style="color:#404">&quot;</span></span>:<span style="color:#00D">4</span>,
    <span style="color:#606"><span style="color:#404">&quot;</span><span>name</span><span style="color:#404">&quot;</span></span>:<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">New York City</span><span style="color:#710">&quot;</span></span>
  },
  <span style="color:#606"><span style="color:#404">&quot;</span><span>links</span><span style="color:#404">&quot;</span></span>:{
    <span style="color:#606"><span style="color:#404">&quot;</span><span>get</span><span style="color:#404">&quot;</span></span>:<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">/api/v1/tasks/9221</span><span style="color:#710">&quot;</span></span>
  }
}
</pre></div>
</div>

<h3>POST &#47;api&#47;v1&#47;tasks</h3>

<ul>
<li>Authorization: OAuth rRou72pewt102y926jfhwow438238poQR31d</li>
<li>Content-Type: application&#47;x-www-form-urlencoded</li>
</ul>
<div class="CodeRay">
  <div class="code"><pre>task:
  name: My Second Task
  named_price: 20
  city_id: 4
</pre></div>
</div>

<h3>Simplified Response</h3>

<ul>
<li>Status Code: 200</li>
<li>Content-Type: application&#47;json</li>
</ul>
<div class="CodeRay">
  <div class="code"><pre>{
  <span style="color:#606"><span style="color:#404">&quot;</span><span>id</span><span style="color:#404">&quot;</span></span>:<span style="color:#00D">9222</span>,
  <span style="color:#606"><span style="color:#404">&quot;</span><span>name</span><span style="color:#404">&quot;</span></span>:<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">My Second Task</span><span style="color:#710">&quot;</span></span>,
  <span style="color:#606"><span style="color:#404">&quot;</span><span>named_price</span><span style="color:#404">&quot;</span></span>: <span style="color:#00D">20</span>,
  <span style="color:#606"><span style="color:#404">&quot;</span><span>state</span><span style="color:#404">&quot;</span></span>:<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">opened</span><span style="color:#710">&quot;</span></span>,
  <span style="color:#606"><span style="color:#404">&quot;</span><span>city</span><span style="color:#404">&quot;</span></span>:{
    <span style="color:#606"><span style="color:#404">&quot;</span><span>id</span><span style="color:#404">&quot;</span></span>:<span style="color:#00D">4</span>,
    <span style="color:#606"><span style="color:#404">&quot;</span><span>name</span><span style="color:#404">&quot;</span></span>:<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">New York City</span><span style="color:#710">&quot;</span></span>
  },
  <span style="color:#606"><span style="color:#404">&quot;</span><span>links</span><span style="color:#404">&quot;</span></span>:{
    <span style="color:#606"><span style="color:#404">&quot;</span><span>get</span><span style="color:#404">&quot;</span></span>:<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">/api/v1/tasks/9222</span><span style="color:#710">&quot;</span></span>
  }
}
</pre></div>
</div>

<h1>Error Cases</h1>

<p>The server will respond with different status codes when there is a problem posting the Task.</p>

<h2>Incorrect Authorization</h2>

<h3>POST &#47;api&#47;v1&#47;tasks</h3>

<ul>
<li>Authorization: OAuth XXXXXX</li>
<li>Content-Type: application&#47;json</li>
</ul>
<div class="CodeRay">
  <div class="code"><pre>{
  <span style="color:#606"><span style="color:#404">&quot;</span><span>task</span><span style="color:#404">&quot;</span></span>: {
    <span style="color:#606"><span style="color:#404">&quot;</span><span>name</span><span style="color:#404">&quot;</span></span>:<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">My First Task</span><span style="color:#710">&quot;</span></span>, 
    <span style="color:#606"><span style="color:#404">&quot;</span><span>named_price</span><span style="color:#404">&quot;</span></span>: <span style="color:#00D">20</span>, 
    <span style="color:#606"><span style="color:#404">&quot;</span><span>city_id</span><span style="color:#404">&quot;</span></span>: <span style="color:#00D">4</span>
  }
}
</pre></div>
</div>

<h3>401 Unauthorized</h3>

<ul>
<li>Content-Type: application&#47;json</li>
</ul>
<div class="CodeRay">
  <div class="code"><pre>{
  <span style="color:#606"><span style="color:#404">&quot;</span><span>error</span><span style="color:#404">&quot;</span></span>:<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">There must be an authenticated user for this action</span><span style="color:#710">&quot;</span></span>
}
</pre></div>
</div>

<h2>Missing Required Fields</h2>

<h3>POST &#47;api&#47;v1&#47;tasks</h3>

<ul>
<li>Authorization: OAuth rRou72pewt102y926jfhwow438238poQR31d</li>
<li>Content-Type: application&#47;json</li>
</ul>
<div class="CodeRay">
  <div class="code"><pre>{
  <span style="color:#606"><span style="color:#404">&quot;</span><span>task</span><span style="color:#404">&quot;</span></span>: {
    <span style="color:#606"><span style="color:#404">&quot;</span><span>name</span><span style="color:#404">&quot;</span></span>:<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#710">&quot;</span></span>, 
    <span style="color:#606"><span style="color:#404">&quot;</span><span>named_price</span><span style="color:#404">&quot;</span></span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">twenty</span><span style="color:#710">&quot;</span></span>
  }
}
</pre></div>
</div>

<h3>422 Unprocessable Entity</h3>
<div class="CodeRay">
  <div class="code"><pre>{
  <span style="color:#606"><span style="color:#404">&quot;</span><span>errors</span><span style="color:#404">&quot;</span></span>:{
    <span style="color:#606"><span style="color:#404">&quot;</span><span>messages</span><span style="color:#404">&quot;</span></span>:[<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Task title can't be blank</span><span style="color:#710">&quot;</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Amount you are willing to pay is not a number</span><span style="color:#710">&quot;</span></span>],
    <span style="color:#606"><span style="color:#404">&quot;</span><span>fields</span><span style="color:#404">&quot;</span></span>:[[<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">name</span><span style="color:#710">&quot;</span></span>,<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">can't be blank</span><span style="color:#710">&quot;</span></span>], [<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">named_price</span><span style="color:#710">&quot;</span></span>,<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">is not a number</span><span style="color:#710">&quot;</span></span>]]
  },
  <span style="color:#606"><span style="color:#404">&quot;</span><span>error</span><span style="color:#404">&quot;</span></span>:<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Task title can't be blank, </span><span style="color:#b0b">\n</span><span style="color:#D20">Amount you are willing to pay is not a number</span><span style="color:#710">&quot;</span></span>
}
</pre></div>
</div>

<h2>Credit Card Problems</h2>

<p>In the previous requests, TaskRabbit was using the user&#39;s credit card on file.</p>

<ul>
<li>Given the user does not have a credit card on file</li>
<li>Then the Task will still be created, but not posted</li>
</ul>

<h3>POST &#47;api&#47;v1&#47;tasks</h3>

<ul>
<li>Authorization: OAuth rRou72pewt102y926jfhwow438238poQR31d</li>
<li>Content-Type: application&#47;json</li>
</ul>
<div class="CodeRay">
  <div class="code"><pre>{
  <span style="color:#606"><span style="color:#404">&quot;</span><span>task</span><span style="color:#404">&quot;</span></span>: {
    <span style="color:#606"><span style="color:#404">&quot;</span><span>name</span><span style="color:#404">&quot;</span></span>:<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">My Third Task</span><span style="color:#710">&quot;</span></span>, 
    <span style="color:#606"><span style="color:#404">&quot;</span><span>named_price</span><span style="color:#404">&quot;</span></span>: <span style="color:#00D">20</span>, 
    <span style="color:#606"><span style="color:#404">&quot;</span><span>city_id</span><span style="color:#404">&quot;</span></span>: <span style="color:#00D">4</span>
  }
}
</pre></div>
</div>

<h3>Simplified Response</h3>

<ul>
<li>Status Code: 201</li>
<li>Content-Type: application&#47;json</li>
</ul>
<div class="CodeRay">
  <div class="code"><pre>{
  <span style="color:#606"><span style="color:#404">&quot;</span><span>id</span><span style="color:#404">&quot;</span></span>:<span style="color:#00D">9223</span>,
  <span style="color:#606"><span style="color:#404">&quot;</span><span>name</span><span style="color:#404">&quot;</span></span>:<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">My Third Task</span><span style="color:#710">&quot;</span></span>,
  <span style="color:#606"><span style="color:#404">&quot;</span><span>named_price</span><span style="color:#404">&quot;</span></span>: <span style="color:#00D">20</span>,
  <span style="color:#606"><span style="color:#404">&quot;</span><span>state</span><span style="color:#404">&quot;</span></span>:<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">unpaid</span><span style="color:#710">&quot;</span></span>,
  <span style="color:#606"><span style="color:#404">&quot;</span><span>city</span><span style="color:#404">&quot;</span></span>:{
    <span style="color:#606"><span style="color:#404">&quot;</span><span>id</span><span style="color:#404">&quot;</span></span>:<span style="color:#00D">4</span>,
    <span style="color:#606"><span style="color:#404">&quot;</span><span>name</span><span style="color:#404">&quot;</span></span>:<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">New York City</span><span style="color:#710">&quot;</span></span>
  },
  <span style="color:#606"><span style="color:#404">&quot;</span><span>links</span><span style="color:#404">&quot;</span></span>:{
    <span style="color:#606"><span style="color:#404">&quot;</span><span>get</span><span style="color:#404">&quot;</span></span>:<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">/api/v1/tasks/9223</span><span style="color:#710">&quot;</span></span>,
    <span style="color:#606"><span style="color:#404">&quot;</span><span>redirect</span><span style="color:#404">&quot;</span></span>:<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">https://test.taskrabbit.com/tasks/my-third-task?card=true</span><span style="color:#710">&quot;</span></span>
  }
}
</pre></div>
</div>

<p>Whenever the links[redirect] key is present, the user should be shown the URL given. In this case, the page will allow the user to enter her credit card number to complete the transaction.</p>


      </div>
    </div>

     <div id="footer" >
    </div><!-- /#footer -->
  </body>
</html>